{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\udmeyCourse\\\\node\\\\devNetwork\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\udmeyCourse\\\\node\\\\devNetwork\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import axios from'axios';import{setAlert}from'./alert';import{CLEAR_PROFILE,GET_PROFILES,GET_PROFILE,PROFILE_ERROR,UPDATE_PROFILE,ACCOUNT_DELETED,GET_REPOS,NO_REPOS}from'./types';// get current users profile\nexport var getCurrentProfile=function getCurrentProfile(){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get('/api/profile/me');case 3:res=_context.sent;dispatch({type:GET_PROFILE,payload:res.data});_context.next=11;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);dispatch({type:CLEAR_PROFILE});dispatch({type:PROFILE_ERROR,payload:{msg:_context.t0.response.statusText,status:_context.t0.response.status}});case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function(_x){return _ref.apply(this,arguments);};}();};// get all files\nexport var getProfiles=function getProfiles(){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:dispatch({type:CLEAR_PROFILE});_context2.prev=1;_context2.next=4;return axios.get('/api/profile');case 4:res=_context2.sent;dispatch({type:GET_PROFILES,payload:res.data});_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](1);dispatch({type:PROFILE_ERROR,payload:{msg:_context2.t0.response.statusText,status:_context2.t0.response.status}});case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[1,8]]);}));return function(_x2){return _ref2.apply(this,arguments);};}();};// get profile by id\nexport var getProfileById=function getProfileById(userId){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){var res;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return axios.get(\"/api/profile/user/\".concat(userId,\"/\"));case 2:res=_context3.sent;try{dispatch({type:GET_PROFILE,payload:res.data});}catch(err){dispatch({type:PROFILE_ERROR,payload:{msg:err.response.statusText,status:err.response.status}});}case 4:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3){return _ref3.apply(this,arguments);};}();};// get github repos\nexport var getGithubRepos=function getGithubRepos(username){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch){var res;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return axios.get(\"/api/profile/github/\".concat(username));case 3:res=_context4.sent;dispatch({type:GET_REPOS,payload:res.data});_context4.next=10;break;case 7:_context4.prev=7;_context4.t0=_context4[\"catch\"](0);dispatch({type:NO_REPOS});case 10:case\"end\":return _context4.stop();}}},_callee4,null,[[0,7]]);}));return function(_x4){return _ref4.apply(this,arguments);};}();};// create or update profile\nexport var createProfile=function createProfile(formData,history){var edit=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;return/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(dispatch){var config,res,errors;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.prev=0;config={headers:{'Content-type':'application/JSON'}};_context5.next=4;return axios.post('/api/profile',formData,config);case 4:res=_context5.sent;dispatch({type:GET_PROFILE,payload:res.data});dispatch(setAlert(edit?'Profile Updated':'Profile Created','success'));if(!edit){history.push('/dashboard');}_context5.next=15;break;case 10:_context5.prev=10;_context5.t0=_context5[\"catch\"](0);errors=_context5.t0.response.data.errors;if(errors){errors.forEach(function(error){return dispatch(setAlert(error.msg,'danger'));});}dispatch({type:PROFILE_ERROR,payload:{msg:_context5.t0.response.statusText,status:_context5.t0.response.status}});case 15:case\"end\":return _context5.stop();}}},_callee5,null,[[0,10]]);}));return function(_x5){return _ref5.apply(this,arguments);};}();};// add experience\nexport var addExperience=function addExperience(formData,history){return/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(dispatch){var config,res,errors;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.prev=0;config={headers:{'Content-type':'application/JSON'}};_context6.next=4;return axios.put('/api/profile/experience',formData,config);case 4:res=_context6.sent;dispatch({type:UPDATE_PROFILE,payload:res.data});dispatch(setAlert('experience added ','success'));history.push('/dashboard');_context6.next=15;break;case 10:_context6.prev=10;_context6.t0=_context6[\"catch\"](0);errors=_context6.t0.response.data.errors;if(errors){errors.forEach(function(error){return dispatch(setAlert(error.msg,'danger'));});}dispatch({type:PROFILE_ERROR,payload:{msg:_context6.t0.response.statusText,status:_context6.t0.response.status}});case 15:case\"end\":return _context6.stop();}}},_callee6,null,[[0,10]]);}));return function(_x6){return _ref6.apply(this,arguments);};}();};// add education\nexport var addEducation=function addEducation(formData,history){return/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(dispatch){var config,res,errors;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.prev=0;config={headers:{'Content-type':'application/JSON'}};_context7.next=4;return axios.put('/api/profile/education',formData,config);case 4:res=_context7.sent;dispatch({type:UPDATE_PROFILE,payload:res.data});dispatch(setAlert('education added ','success'));history.push('/dashboard');_context7.next=15;break;case 10:_context7.prev=10;_context7.t0=_context7[\"catch\"](0);errors=_context7.t0.response.data.errors;if(errors){errors.forEach(function(error){return dispatch(setAlert(error.msg,'danger'));});}dispatch({type:PROFILE_ERROR,payload:{msg:_context7.t0.response.statusText,status:_context7.t0.response.status}});case 15:case\"end\":return _context7.stop();}}},_callee7,null,[[0,10]]);}));return function(_x7){return _ref7.apply(this,arguments);};}();};// delete experience\nexport var deleteExperience=function deleteExperience(id){return/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(dispatch){var res;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.prev=0;_context8.next=3;return axios.delete(\"/api/profile/experience/\".concat(id));case 3:res=_context8.sent;dispatch({type:UPDATE_PROFILE,payload:res.data});dispatch(setAlert('experience Removed','success'));_context8.next=11;break;case 8:_context8.prev=8;_context8.t0=_context8[\"catch\"](0);dispatch({type:PROFILE_ERROR,payload:{msg:_context8.t0.response.statusText,status:_context8.t0.response.status}});case 11:case\"end\":return _context8.stop();}}},_callee8,null,[[0,8]]);}));return function(_x8){return _ref8.apply(this,arguments);};}();};// delete education\nexport var deleteEducation=function deleteEducation(id){return/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(dispatch){var res;return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_context9.prev=0;_context9.next=3;return axios.delete(\"/api/profile/education/\".concat(id));case 3:res=_context9.sent;dispatch({type:UPDATE_PROFILE,payload:res.data});dispatch(setAlert('education Removed','success'));_context9.next=11;break;case 8:_context9.prev=8;_context9.t0=_context9[\"catch\"](0);dispatch({type:PROFILE_ERROR,payload:{msg:_context9.t0.response.statusText,status:_context9.t0.response.status}});case 11:case\"end\":return _context9.stop();}}},_callee9,null,[[0,8]]);}));return function(_x9){return _ref9.apply(this,arguments);};}();};// DELETE ACCOUNT AND PROFILE\nexport var deleteAccount=function deleteAccount(){return/*#__PURE__*/function(){var _ref10=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee10(dispatch){return _regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:if(window.confirm('are you sure?  This can not be undone')){try{dispatch({type:CLEAR_PROFILE});dispatch({type:ACCOUNT_DELETED});dispatch(setAlert('your account  has been permanatly deleted'));}catch(err){dispatch({type:PROFILE_ERROR,payload:{msg:err.response.status,status:err.response.status}});}}case 1:case\"end\":return _context10.stop();}}},_callee10);}));return function(_x10){return _ref10.apply(this,arguments);};}();};","map":{"version":3,"sources":["C:/udmeyCourse/node/devNetwork/client/src/action/profile.js"],"names":["axios","setAlert","CLEAR_PROFILE","GET_PROFILES","GET_PROFILE","PROFILE_ERROR","UPDATE_PROFILE","ACCOUNT_DELETED","GET_REPOS","NO_REPOS","getCurrentProfile","dispatch","get","res","type","payload","data","msg","response","statusText","status","getProfiles","getProfileById","userId","err","getGithubRepos","username","createProfile","formData","history","edit","config","headers","post","push","errors","forEach","error","addExperience","put","addEducation","deleteExperience","id","delete","deleteEducation","deleteAccount","window","confirm"],"mappings":"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","sourcesContent":["import axios from 'axios';\r\nimport { setAlert } from './alert';\r\n\r\nimport {\r\n  CLEAR_PROFILE,\r\n  GET_PROFILES,\r\n  GET_PROFILE,\r\n  PROFILE_ERROR,\r\n  UPDATE_PROFILE,\r\n  ACCOUNT_DELETED,\r\n  GET_REPOS,\r\n  NO_REPOS,\r\n} from './types';\r\n\r\n// get current users profile\r\nexport const getCurrentProfile = () => async (dispatch) => {\r\n  try {\r\n    const res = await axios.get('/api/profile/me');\r\n    dispatch({\r\n      type: GET_PROFILE,\r\n      payload: res.data,\r\n    });\r\n  } catch (err) {\r\n    dispatch({ type: CLEAR_PROFILE });\r\n    dispatch({\r\n      type: PROFILE_ERROR,\r\n      payload: { msg: err.response.statusText, status: err.response.status },\r\n    });\r\n  }\r\n};\r\n\r\n// get all files\r\nexport const getProfiles = () => async (dispatch) => {\r\n  dispatch({ type: CLEAR_PROFILE });\r\n  try {\r\n    const res = await axios.get('/api/profile');\r\n    dispatch({\r\n      type: GET_PROFILES,\r\n      payload: res.data,\r\n    });\r\n  } catch (err) {\r\n    dispatch({\r\n      type: PROFILE_ERROR,\r\n      payload: { msg: err.response.statusText, status: err.response.status },\r\n    });\r\n  }\r\n};\r\n\r\n// get profile by id\r\nexport const getProfileById = (userId) => async (dispatch) => {\r\n  const res = await axios.get(`/api/profile/user/${userId}/`);\r\n  try {\r\n    dispatch({\r\n      type: GET_PROFILE,\r\n      payload: res.data,\r\n    });\r\n  } catch (err) {\r\n    dispatch({\r\n      type: PROFILE_ERROR,\r\n      payload: { msg: err.response.statusText, status: err.response.status },\r\n    });\r\n  }\r\n};\r\n\r\n// get github repos\r\nexport const getGithubRepos = (username) => async (dispatch) => {\r\n  try {\r\n    const res = await axios.get(`/api/profile/github/${username}`);\r\n    dispatch({\r\n      type: GET_REPOS,\r\n      payload: res.data,\r\n    });\r\n  } catch (err) {\r\n    dispatch({\r\n      type: NO_REPOS,\r\n    });\r\n  }\r\n};\r\n\r\n// create or update profile\r\nexport const createProfile = (formData, history, edit = false) => async (\r\n  dispatch\r\n) => {\r\n  try {\r\n    const config = {\r\n      headers: {\r\n        'Content-type': 'application/JSON',\r\n      },\r\n    };\r\n\r\n    const res = await axios.post('/api/profile', formData, config);\r\n    dispatch({\r\n      type: GET_PROFILE,\r\n      payload: res.data,\r\n    });\r\n    dispatch(setAlert(edit ? 'Profile Updated' : 'Profile Created', 'success'));\r\n    if (!edit) {\r\n      history.push('/dashboard');\r\n    }\r\n  } catch (err) {\r\n    const { errors } = err.response.data;\r\n\r\n    if (errors) {\r\n      errors.forEach((error) => dispatch(setAlert(error.msg, 'danger')));\r\n    }\r\n\r\n    dispatch({\r\n      type: PROFILE_ERROR,\r\n      payload: { msg: err.response.statusText, status: err.response.status },\r\n    });\r\n  }\r\n};\r\n\r\n// add experience\r\nexport const addExperience = (formData, history) => async (dispatch) => {\r\n  try {\r\n    const config = {\r\n      headers: {\r\n        'Content-type': 'application/JSON',\r\n      },\r\n    };\r\n\r\n    const res = await axios.put('/api/profile/experience', formData, config);\r\n    dispatch({\r\n      type: UPDATE_PROFILE,\r\n      payload: res.data,\r\n    });\r\n    dispatch(setAlert('experience added ', 'success'));\r\n\r\n    history.push('/dashboard');\r\n  } catch (err) {\r\n    const { errors } = err.response.data;\r\n\r\n    if (errors) {\r\n      errors.forEach((error) => dispatch(setAlert(error.msg, 'danger')));\r\n    }\r\n\r\n    dispatch({\r\n      type: PROFILE_ERROR,\r\n      payload: { msg: err.response.statusText, status: err.response.status },\r\n    });\r\n  }\r\n};\r\n\r\n// add education\r\nexport const addEducation = (formData, history) => async (dispatch) => {\r\n  try {\r\n    const config = {\r\n      headers: {\r\n        'Content-type': 'application/JSON',\r\n      },\r\n    };\r\n\r\n    const res = await axios.put('/api/profile/education', formData, config);\r\n    dispatch({\r\n      type: UPDATE_PROFILE,\r\n      payload: res.data,\r\n    });\r\n    dispatch(setAlert('education added ', 'success'));\r\n\r\n    history.push('/dashboard');\r\n  } catch (err) {\r\n    const { errors } = err.response.data;\r\n\r\n    if (errors) {\r\n      errors.forEach((error) => dispatch(setAlert(error.msg, 'danger')));\r\n    }\r\n\r\n    dispatch({\r\n      type: PROFILE_ERROR,\r\n      payload: { msg: err.response.statusText, status: err.response.status },\r\n    });\r\n  }\r\n};\r\n\r\n// delete experience\r\nexport const deleteExperience = (id) => async (dispatch) => {\r\n  try {\r\n    const res = await axios.delete(`/api/profile/experience/${id}`);\r\n    dispatch({\r\n      type: UPDATE_PROFILE,\r\n      payload: res.data,\r\n    });\r\n    dispatch(setAlert('experience Removed', 'success'));\r\n  } catch (err) {\r\n    dispatch({\r\n      type: PROFILE_ERROR,\r\n      payload: { msg: err.response.statusText, status: err.response.status },\r\n    });\r\n  }\r\n};\r\n// delete education\r\nexport const deleteEducation = (id) => async (dispatch) => {\r\n  try {\r\n    const res = await axios.delete(`/api/profile/education/${id}`);\r\n    dispatch({\r\n      type: UPDATE_PROFILE,\r\n      payload: res.data,\r\n    });\r\n    dispatch(setAlert('education Removed', 'success'));\r\n  } catch (err) {\r\n    dispatch({\r\n      type: PROFILE_ERROR,\r\n      payload: { msg: err.response.statusText, status: err.response.status },\r\n    });\r\n  }\r\n};\r\n\r\n// DELETE ACCOUNT AND PROFILE\r\nexport const deleteAccount = () => async (dispatch) => {\r\n  if (window.confirm('are you sure?  This can not be undone')) {\r\n    try {\r\n      dispatch({ type: CLEAR_PROFILE });\r\n      dispatch({ type: ACCOUNT_DELETED });\r\n\r\n      dispatch(setAlert('your account  has been permanatly deleted'));\r\n    } catch (err) {\r\n      dispatch({\r\n        type: PROFILE_ERROR,\r\n        payload: { msg: err.response.status, status: err.response.status },\r\n      });\r\n    }\r\n  }\r\n};\r\n"]},"metadata":{},"sourceType":"module"}